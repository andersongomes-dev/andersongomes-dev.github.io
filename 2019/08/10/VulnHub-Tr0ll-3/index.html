<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="pt-br">
	<head>
		
<title>VulnHub Tr0ll: 3 - Anderson Gomes</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/assets/favicons/favicon.ico">

<link rel="stylesheet" href="/assets/bulma/css/bulma.min.css">


<link rel="stylesheet" href="/assets/fontawesome-free-6.5.1-web/css/all.css">


<link rel="stylesheet" href="/assets/css/main.css">


<meta name="keywords" content="Anderson Gomes">
<meta name="description" content="">


	<meta name="generator" content="Hexo 7.0.0"></head>
	<body>
		<div id="home-hidden"></div>
		<nav class="navbar is-fixed-top has-text-centered" role="navigation" aria-label="main navigation" style="background-color: #19193b;">
	<div class="container">
		<div class="navbar-brand">
			<a class="navbar-item logo" href="/">
				<img src="/assets/images/logo_anderson.png" width="112" height="28">
			</a>
			<a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
				data-target="navbarBasicExample">
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
			</a>
		</div>

		<div id="navbarBasicExample" class="navbar-menu">
			<div class="navbar-start">
				
					</for>
					<a class="navbar-item navbar-item-hover" href="/">
						HOME
					</a>
					
					</for>
					<a class="navbar-item navbar-item-hover" href="/about">
						ABOUT
					</a>
					
			</div>

			<div class="navbar-end">
				<div class="navbar-item">
					<div class="buttons">
						<a class="button navbar-item-social" target="_blank" rel="noopener" href="https://www.youtube.com/@andersonDev_">
							<i class="fa-brands fa-youtube fa-2xl"></i>
						</a>
						<a class="button navbar-item-social" target="_blank" rel="noopener" href="https://www.linkedin.com/in/devanderson">
							<i class="fa-brands fa-linkedin fa-2xl"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</nav> 

<div class="container container-100vh">
  <div class="columns">
    <div class="column is-8 is-offset-2 has-text-centered">
      <!--figure class="image is-16by9"-->
      <figure class="image">
        <img src="https://cdn-images-1.medium.com/max/800/1*nw1NlT8J4dpZuTwD2bYh5Q.png" alt="">
        <figcaption></figcaption>
      </figure>
    </div>
  </div>
  <section class="articles">
    <div class="column is-8 is-offset-2">
      <div class="card article background-color-principal">
        <div class="card-content">
          <div class="media">
            <div class="media-content has-text-centered">
              <p class="title article-title">VulnHub Tr0ll: 3</p>
              <p class="subtitle is-4 article-subtitle is-pulled-left">
                Escrito por Anderson Gomes em 10/08/2019
              </p>
              
              <!--div class="control"><span class="tag is-info is-uppercase">story</span></div-->
            </div>
          </div>
          <div class="content article-body"><blockquote>
<p>Alvo: <strong>Tr0ll: 3 <em>(Linux)</em></strong><br>Atacante: <strong><em>parrot</em></strong> <em>4.19</em></p>
</blockquote>
<h3 id="Informacoes-sobre-o-Alvo"><a href="#Informacoes-sobre-o-Alvo" class="headerlink" title="Informações sobre o Alvo."></a>Informações sobre o Alvo.</h3><p>Ao iniciar a maquina alvo já temos um usuário e senha “start:here” para começar.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*ig8GTuPcF7dWygjDqq0dvw.png" alt="Primeiro usuário.">
  <figcaption>Primeiro usuário.</figcaption>
</figure>

<p>Primeiro usuário.</p>
<h3 id="Reconhecimento-Enumeracao"><a href="#Reconhecimento-Enumeracao" class="headerlink" title="Reconhecimento &#x2F; Enumeração."></a>Reconhecimento &#x2F; Enumeração.</h3><figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*W_SPImwuB-SE-N4rkAXa8g.png" alt="netdiscover">
  <figcaption>netdiscover</figcaption>
</figure>


<p>O ip do alvo é 192.168.1.10</p>
<p>Usando “nmap” para lista portas e serviços e verificar se há alguma vulnerabilidade.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*nw1NlT8J4dpZuTwD2bYh5Q.png" alt="nmap">
  <figcaption>nmap</figcaption>
</figure>



<p>Só temos o “ssh” rodando na porta 22, a única opção e utilizar o usuário e senha que temos.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*oMMyeZGl0JIXw46FnYjJnw.png" alt="Dados do usuário start.">
  <figcaption>Dados do usuário start.</figcaption>
</figure>


<p>Há duas pasta “<strong>bluepill”</strong> e “<strong>redpill”</strong> cada uma possui um arquivo, um arquivo nos da um <em>link</em> não há absolutamente nada de interessante nele, o outro arquivo nos da um possível usuário e senha.</p>
<p>Testando o “step2” não temos acesso a nada ou a senha esta errada.</p>
<p>Não custa nada tentar procurar arquivos com permissão de leitura escrita e execução.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*4-J9ApRFZ8d0SdFwbxp-rw.png" alt="Arquivos com permissão total.">
  <figcaption>Arquivos com permissão total.</figcaption>
</figure>


<p>Verifiquei no wireshark o arquivo “wytshadow.cap” a procura de algo interessante, mas só há capturas de pacotes de uma rede wifi.<br>Verificando o arquivo “gold_star.txt” ele parece muito com uma wordlist.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*iZd9S3rh9_CBuS3go0pwFw.png" alt="gold_star.txt">
  <figcaption>gold_star.txt</figcaption>
</figure>

<p>Juntando tudo “wytshadow.cap” + “gold_star.txt” &#x3D; “aircrack-ng”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*Xqk50w1DMm1prH1mkQs-DQ.png" alt="aircrack-ng">
  <figcaption>aircrack-ng</figcaption>
</figure>



<p>Será que é apenas uma senha da wifi? Vamos ver no “&#x2F;etc&#x2F;passwd” se existe algum usuário com o nome “wytshadow”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*dKxRuNLYq8FIoTBvoXpMOQ.png" alt="/etc/passwd">
  <figcaption>/etc/passwd</figcaption>
</figure>

<p>Existe um usuário “wytshadow”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*BE2CV3CrpT6aqaxtm0xM7g.png" alt="wytshadow">
  <figcaption>wytshadow</figcaption>
</figure>



<p>Existe um arquivo com permissão especial “oohfun”, mas ele não vai nos levar a nada, pois o dono do arquivo é “genphlux” e não o “root”.<br>Vamos verificar podemos rodar algum comando com “sudo”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*JcZTZNeekaN2BILj01VCJw.png" alt="">
  <figcaption></figcaption>
</figure>

<p>Vamos rodar “sudo &#x2F;usr&#x2F;sbin&#x2F;service nginx start”.<br>Descobrindo a porta do nginx.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*8trrBvN9meZD7SVoTqXM_g.png" alt="configuração do nginx.">
  <figcaption>configuração do nginx.</figcaption>
</figure>



<p>A porta que o serviço esta rodando é a 8080, outra coisa interessante é que deve ser enviado um “User-Agent” especifico.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*wmLqFCPX9MZWzbWhMvxfYA.png" alt="genphlux">
  <figcaption>genphlux</figcaption>2024-01-04
</figure>

<p>Conseguimos mais um usuário “genphlux” e senha.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*k5plpQHgLNNfShbQDSkalw.png" alt="">
  <figcaption></figcaption>
</figure>

<p>Novamente vamos verificar no “&#x2F;etc&#x2F;passwd” se existe um usuário maleus.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*OS0tUrY3U8wN7g6LM85c4g.png" alt="maleus">
  <figcaption>maleus</figcaption>
</figure>



<p>Listando arquivo do usuário “maleus”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*CkXyvMGfH3WhZQjGQnNNfQ.png" alt="">
  <figcaption></figcaption>
</figure>

<p>para verifica quais comandos podemos executar com “sudo”, precisamos da senha.<br>A senha estava dentro do arquivo “.viminfo”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*cBigw6VBAKGne0Q2DIwcMg.png" alt="senha do usuário maleus.">
  <figcaption>senha do usuário maleus.</figcaption>
</figure>



<p>Podemos executar o “dont_even_bother” com “sudo”.<br>Analise do “dont_even_bother”.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*W8vNfzaOf5NyfXa7cySVtg.png" alt="gdb">
  <figcaption>gdb</figcaption>
</figure>


<p>O “dont_even_bother” tem proteção ativa o que demanda muito tempo para e explorar.<br>Por que explorar? se eu posso gerar um novo “dont_even_bother” para ele fazer o que eu quero.</p>
<figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*bby4zMfWu6x5Pb1d5MXwnQ.png" alt="dont_even_bother.c">
  <figcaption>dont_even_bother.c</figcaption>
</figure>

<h3 id="Escalacao-de-Privilegios"><a href="#Escalacao-de-Privilegios" class="headerlink" title="Escalação de Privilégios"></a>Escalação de Privilégios</h3><figure class="image">
  <img src="https://cdn-images-1.medium.com/max/800/1*wrZ51NuLfJQ_hH9VqwQnbg.png" alt="Ganhando o root.">
  <figcaption>Ganhando o root.</figcaption>
</figure>



<p>Até a próxima.</p>
</div>
        </div>
      </div>
    </div>
  </section>
</div>
<div class="container">
  <nav class="pagination is-centered" role="navigation" aria-label="pagination">
    <div class="column is-6 is-offset-3">
      
      <a
        class="button bd-fat-button is-info is-light bd-pagination-prev artigo-button"
        href="/2019/08/22/VulnHub-serial-1/"
        title="Artigo Anterior"
      >
        <strong><i class="fa fa-arrow-left"></i> Artigo Anterior</strong>
      </a>
       
      <a
        class="button bd-fat-button is-info is-light bd-pagination-prev artigo-button"
        href="/2019/08/04/VulnHub-sunset-1/"
        title="Próximo Artigo"
      >
        <strong>Próximo Artigo <i class="fa fa-arrow-right"></i></strong>
      </a>
      
    </div>
  </nav>
</div>

<!--% partial('_partial/post_paging') %-->

		<a id="toTop" class="button" style="display: block;" href="#home-hidden">
  <span class="icon is-large">
      <i class="fas fa-arrow-up"></i>
  </span>
</a>

<footer class="section footer_section">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        <strong
          >© 2023-2024 Desenvolvido por
          <a target="_blank" rel="noopener" href="https://andersongomes.dev.br">Anderson Gomes</a>.</strong
        >
      </p>
    </div>
  </div>
</footer>

<script src="/assets/js/bulma.js"></script>


	</body>
</html>

